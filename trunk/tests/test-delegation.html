<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-US">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<title>Testing Event Delegation</title>
<link rel="stylesheet" type="text/css" href="test.css"/>
<style type="text/css">
.test{
border:10px solid;
padding:20px 25px;
text-align:center;
font-size:30px;
font-weight:bold;
margin:20px 0px;
cursor:pointer;
}
.unconfirmed{
background:#ff6;
color:#990;
}
.confirmed{
background:#cfc;
color:#090;
}
.failed{
background:#fcc;
color:#c00;
}
</style>
<script type="text/javascript" src="../reg.js"></script>
<script type="text/javascript">
reg.importAll();


reg.click('div#testclick', function(e){
	if (!hcn(this,'unconfirmed')) { return; }
	var passed = true;
	if (!matches(getTarget(e), 'div')) { passed = false; }
	if (!matches(this, 'div')) { passed = false; }
	if (passed) {
		rcn(this, 'failed');
		rcn(this, 'unconfirmed');
		acn(this, 'confirmed');
		this.innerHTML = 'passed click';
	}
	else {
		rcn(this, 'confirmed');
		rcn(this, 'unconfirmed');
		acn(this, 'failed');
		this.innerHTML = 'failed click';
	}
});

reg.click('div#testdepth', function(e){
	var inner = reg.gebcn('test',this)[0];
	if (!hcn(inner,'unconfirmed')) { return; }
	rcn(inner, 'confirmed');
	rcn(inner, 'unconfirmed');
	acn(inner, 'failed');
	inner.innerHTML = 'failed depth';
},0);

reg.click('div#testdepth', function(e){
	var inner = reg.gebcn('test',this)[0];
	if (hcn(inner,'failed')) { return; }
	rcn(inner, 'failed');
	rcn(inner, 'unconfirmed');
	acn(inner, 'confirmed');
	inner.innerHTML = 'passed depth';
});

reg.click('div#testdblclick', null, null, null, function(e){
	if (!hcn(this,'unconfirmed')) { return; }
	var passed = true;
	if (!matches(getTarget(e), 'div')) { passed = false; }
	if (!matches(this, 'div')) { passed = false; }
	if (passed) {
		rcn(this, 'failed');
		rcn(this, 'unconfirmed');
		acn(this, 'confirmed');
		this.innerHTML = 'passed double click';
	}
	else {
		rcn(this, 'confirmed');
		rcn(this, 'unconfirmed');
		acn(this, 'failed');
		this.innerHTML = 'failed double click';
	}
});

reg.click('div#testmousedownup', null, function(e){
	if (!hcn(this,'unconfirmed')) { return; }
	var passed = true;
	if (!matches(getTarget(e), 'div')) { passed = false; }
	if (!matches(this, 'div')) { passed = false; }
	if (passed) {
		rcn(this, 'failed');
		rcn(this, 'unconfirmed');
		acn(this, 'confirmed');
		this.innerHTML = 'passed mousedown';
	}
	else {
		rcn(this, 'confirmed');
		rcn(this, 'unconfirmed');
		acn(this, 'failed');
		this.innerHTML = 'failed mousedown';
	}
}, function(e){
	if (!hcn(this,'confirmed') && !hcn(this,'unconfirmed')) { return; }
	var passed = true;
	if (!matches(getTarget(e), 'div')) { passed = false; }
	if (!matches(this, 'div')) { passed = false; }
	if (passed) {
		rcn(this, 'failed');
		rcn(this, 'unconfirmed');
		acn(this, 'confirmed');
		this.innerHTML = 'passed mousedown and mouseup';
	}
	else {
		rcn(this, 'confirmed');
		rcn(this, 'unconfirmed');
		acn(this, 'failed');
		this.innerHTML = 'failed mouseup';
	}
});

reg.hover('div#testhover', function(e){
	if (!hcn(this,'unconfirmed')) { return; }
	var passed = true;
	if (!matches(getTarget(e), 'div')) { passed = false; }
	if (!matches(this, 'div')) { passed = false; }
	if (passed) {
		rcn(this, 'failed');
		rcn(this, 'unconfirmed');
		acn(this, 'confirmed');
		this.innerHTML = 'passed mouseover';
	}
	else {
		rcn(this, 'confirmed');
		rcn(this, 'unconfirmed');
		acn(this, 'failed');
		this.innerHTML = 'failed mouseover';
	}
}, function(e){
	if (!hcn(this,'confirmed')) { return; }
	var passed = true;
	if (!matches(getTarget(e), 'div')) { passed = false; }
	if (!matches(this, 'div')) { passed = false; }
	if (passed) {
		rcn(this, 'failed');
		rcn(this, 'unconfirmed');
		acn(this, 'confirmed');
		this.innerHTML = 'passed mouseover and mouseout';
	}
	else {
		rcn(this, 'confirmed');
		rcn(this, 'unconfirmed');
		acn(this, 'failed');
		this.innerHTML = 'failed mouseout';
	}
});

reg.focus('div#testfocus', function(e){
	if (!hcn(this,'unconfirmed')) { return; }
	var passed = true;
	if (!matches(this, 'div')) { passed = false; }
	if (passed) {
		rcn(this, 'failed');
		rcn(this, 'unconfirmed');
		acn(this, 'confirmed');
		gebi('foc').value = 'passed focus';
	}
	else {
		rcn(this, 'confirmed');
		rcn(this, 'unconfirmed');
		acn(this, 'failed');
		gebi('foc').value = 'failed focus';
	}
}, function(e){
	if (!hcn(this,'confirmed')) { return; }
	var passed = true;
	if (!matches(this, 'div')) { passed = false; }
	if (passed) {
		rcn(this, 'failed');
		rcn(this, 'unconfirmed');
		acn(this, 'confirmed');
		gebi('foc').value = 'passed focus and blur';
	}
	else {
		rcn(this, 'confirmed');
		rcn(this, 'unconfirmed');
		acn(this, 'failed');
		gebi('foc').value = 'failed blur';
	}
});

reg.postSetup(function(){ document.body.innerHTML += ''; });

</script>
</head>
<body>
<div id="pagewrap">
<p><a href="index.html">&laquo; back to index</a></p>
<h1>Testing Event Delegation</h1>

<div id="testclick" class="test unconfirmed">
click to test
</div>

<div id="testmousedownup" class="test unconfirmed">
mousedown and mouseup to test
</div>

<div id="testdblclick" class="test unconfirmed">
double click to test
</div>

<div id="testhover" class="test unconfirmed">
hover to test
</div>

<form action="">
<div id="testfocus" class="test unconfirmed">
<input type="text" value="focus to test" id="foc"/>
</div>
</form>

<div id="testdepth">
<div id="testdepth_inner" class="test unconfirmed">
click to test depth
</div>
</div>

</div>
</body>
</html>



